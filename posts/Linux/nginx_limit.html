<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx 限流 | Para's</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.D_8jB0Xz.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.Cp2o0LQT.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme._OsJjrto.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DDqBDuc9.js">
    <link rel="modulepreload" href="/assets/posts_Linux_nginx_limit.md.DUbu0hRT.lean.js">
    <link rel="icon" href="/logo.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-54b3b317 data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>Para&#39;s</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Pages</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/category.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Category</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/archives.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Archives</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/tags.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Tags</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _posts_Linux_nginx_limit" data-v-e6f2a212><div><h1 id="nginx-限流" tabindex="-1"><a href="https://docs.nginx.com/nginx/admin-guide/security-controls/controlling-access-proxied-http/" target="_blank" rel="noreferrer">Nginx 限流</a> <a class="header-anchor" href="#nginx-限流" aria-label="Permalink to &quot;[Nginx 限流](https://docs.nginx.com/nginx/admin-guide/security-controls/controlling-access-proxied-http/)&quot;">​</a></h1><h2 id="一共三种办法" tabindex="-1">一共三种办法: <a class="header-anchor" href="#一共三种办法" aria-label="Permalink to &quot;一共三种办法:&quot;">​</a></h2><ul><li>limit_conn_zone (桶算算法)</li><li>limit_req_zone (令牌桶算法)</li><li>ngx_http_upstream_module(计数限流)</li></ul><p>Nginx使用的限流算法是漏桶算法。</p><h3 id="limit-conn-zone-桶算算法" tabindex="-1"><a href="http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html" target="_blank" rel="noreferrer">limit_conn_zone: 桶算算法</a> <a class="header-anchor" href="#limit-conn-zone-桶算算法" aria-label="Permalink to &quot;[limit_conn_zone: 桶算算法](http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Syntax:	limit_conn_zone key zone=name:size;</span></span>
<span class="line"><span>Default:	—</span></span>
<span class="line"><span>Context:	http</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Syntax:	limit_conn zone number;</span></span>
<span class="line"><span>Default:	—</span></span>
<span class="line"><span>Context:	http, server, location</span></span></code></pre></div><h4 id="示例-只允许每个ip保持一个连接" tabindex="-1">示例: 只允许每个IP保持一个连接 <a class="header-anchor" href="#示例-只允许每个ip保持一个连接" aria-label="Permalink to &quot;示例: 只允许每个IP保持一个连接&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>limit_conn_zone $binary_remote_addr zone=addr:10m; </span></span>
<span class="line"><span>server {</span></span>
<span class="line"><span>    location /download/ { </span></span>
<span class="line"><span>        limit_conn addr 1; </span></span>
<span class="line"><span>    }</span></span></code></pre></div><h4 id="示例2-可以配置多个limit-coon指令-客户端每个ip连接数-同时限制服务端最大保持连接数" tabindex="-1">示例2: 可以配置多个limit_coon指令 客户端每个IP连接数，同时限制服务端最大保持连接数 <a class="header-anchor" href="#示例2-可以配置多个limit-coon指令-客户端每个ip连接数-同时限制服务端最大保持连接数" aria-label="Permalink to &quot;示例2: 可以配置多个limit_coon指令 客户端每个IP连接数，同时限制服务端最大保持连接数&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>limit_conn_zone $binary_remote_addr zone=perip:10m; </span></span>
<span class="line"><span>limit_conn_zone $server_name zone=perserver:10m; </span></span>
<span class="line"><span>server {</span></span>
<span class="line"><span>    ... </span></span>
<span class="line"><span>    limit_conn perip 10; </span></span>
<span class="line"><span>    limit_conn perserver 100; </span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>}</span></span></code></pre></div><h4 id="漏桶算法" tabindex="-1">漏桶算法 <a class="header-anchor" href="#漏桶算法" aria-label="Permalink to &quot;漏桶算法&quot;">​</a></h4><p><img src="https://img-blog.csdnimg.cn/img_convert/ca807b4e337f8141c6548218e9c4459e.png" alt="漏铜算法"></p><ul><li>水（请求）从上方倒入水桶，从水桶下方流出（被处理）；</li><li>来不及流出的水存在水桶中（缓冲），以固定速率流出；</li><li>水桶满后水溢出（丢弃）。</li><li>这个算法的核心是：缓存请求、匀速处理、多余的请求直接丢弃。</li></ul><h3 id="limit-req-zone-令牌桶算法" tabindex="-1"><a href="http://nginx.org/en/docs/http/ngx_http_limit_req_module.html" target="_blank" rel="noreferrer">limit_req_zone: 令牌桶算法</a> <a class="header-anchor" href="#limit-req-zone-令牌桶算法" aria-label="Permalink to &quot;[limit_req_zone: 令牌桶算法](http://nginx.org/en/docs/http/ngx_http_limit_req_module.html)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Syntax:	limit_req_zone key zone=name:size rate=rate [sync];</span></span>
<span class="line"><span>Default:	—</span></span>
<span class="line"><span>Context:	http</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Syntax:	limit_req zone=name [burst=number] [nodelay | delay=number];</span></span>
<span class="line"><span>Default:	—</span></span>
<span class="line"><span>Context:	http, server, location</span></span></code></pre></div><h4 id="示例1-对ip进行限流" tabindex="-1">示例1: 对IP进行限流 <a class="header-anchor" href="#示例1-对ip进行限流" aria-label="Permalink to &quot;示例1: 对IP进行限流&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http {</span></span>
<span class="line"><span>    limit_req_zone $binary_remote_addr zone=one:10m rate=10r/s;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        location /search/ {</span></span>
<span class="line"><span>            limit_req zone=one burst=20;</span></span>
<span class="line"><span>        }</span></span></code></pre></div><h4 id="示例2-可以配置多个limit-coon指令-客户端每个ip连接数-同时限制服务端最大保持连接数-1" tabindex="-1">示例2: 可以配置多个limit_coon指令 客户端每个IP连接数，同时限制服务端最大保持连接数 <a class="header-anchor" href="#示例2-可以配置多个limit-coon指令-客户端每个ip连接数-同时限制服务端最大保持连接数-1" aria-label="Permalink to &quot;示例2: 可以配置多个limit_coon指令 客户端每个IP连接数，同时限制服务端最大保持连接数&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>limit_req_zone $binary_remote_addr zone=perip:10m rate=1r/s;</span></span>
<span class="line"><span>limit_req_zone $server_name zone=perserver:10m rate=10r/s;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server {</span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>    limit_req zone=perip burst=5 nodelay;</span></span>
<span class="line"><span>    limit_req zone=perserver burst=10;</span></span>
<span class="line"><span>}</span></span></code></pre></div><ul><li><p>$binary_remote_addr</p><p>它是Nginx内置的一个值，代表的是客户端的IP地址的二进制表示。因此换言之，我们的示例配置，是希望限流系统以客户端的IP地址为键进行限流。</p></li><li><p>10M，即可以存储160000个IP地址</p></li><li><p>rate</p><p>rate=10r/s表示允许<strong>同一个客户端</strong>的访问频次是每秒10次，还可以有比如30r/m的</p></li></ul><h4 id="令牌桶算法" tabindex="-1">令牌桶算法 <a class="header-anchor" href="#令牌桶算法" aria-label="Permalink to &quot;令牌桶算法&quot;">​</a></h4><p><img src="https://img-blog.csdnimg.cn/20190817201625821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5Mzk5OTY2,size_16,color_FFFFFF,t_70" alt="令牌桶算法"></p><ul><li>param burst(令牌桶队列长度)</li></ul><p>即漏桶算法中我们的“桶”最多可以接受20个请求。即 queue 大小</p><ul><li>param nodelay (令牌桶流速)</li></ul><p>默认是 delay = 0 即所有的都delay</p><p>相对于传统的漏桶算法慢吞吞地转发请求的缺陷，Nginx实现了一种漏桶算法的优化版，允许开发者指定快速转发，而且还不影响正常的限流功能。开发者只需要在指定limit_req的一行中指定burst之后指定另一个参数nodelay，就可以在请求总数没有超过burst指定值的情况下，迅速转发所有请求了</p><h4 id="令牌桶-nodelay-详细解释" tabindex="-1">令牌桶 nodelay 详细解释 <a class="header-anchor" href="#令牌桶-nodelay-详细解释" aria-label="Permalink to &quot;令牌桶 nodelay 详细解释&quot;">​</a></h4><p>当有没有超过burst上限的请求数量进入系统时，快速转发，然后将当前桶中可以填充的数量标为0</p><p>举例而言，配置如上所示，假如在某个瞬时有100个请求进入系统，Nginx会先转发20个到burst（或21个，取决于瞬时情况），然后拒绝剩下的80个请求，并将当前桶中数量标为0，然后接下来的每100ms(10r/s)，缓慢恢复1个空位。</p><p>在此基础上</p><p>如果设置 nodelay, 由于burst 是20 个 而且对于这些突发的请求，不再按照100ms的节奏去处理，而且立刻（nodelay）发送出去</p><p>如果设置 delay=0(默认值) 20请求会按照10r/s一个一个去拿令牌</p><p>如果设置 delay=5 第一个阶段前5个立刻发送出，然后后面20-5=15个请求按照定义的速率每100ms处理一个。</p><p>因为</p><h3 id="ngx-http-upstream-module-max-conns-在nginx1-11-5版本以后" tabindex="-1"><a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html" target="_blank" rel="noreferrer">ngx_http_upstream_module</a> -&gt; max_conns(在nginx1.11.5版本以后) <a class="header-anchor" href="#ngx-http-upstream-module-max-conns-在nginx1-11-5版本以后" aria-label="Permalink to &quot;[ngx_http_upstream_module](http://nginx.org/en/docs/http/ngx_http_upstream_module.html) -&gt; max_conns(在nginx1.11.5版本以后)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>upstream backend{ </span></span>
<span class="line"><span>    server 127.0.0.1:8081 max_conns=10; </span></span>
<span class="line"><span>    server 127.0.0.1:8082 max_conns=10; </span></span>
<span class="line"><span>}</span></span></code></pre></div><h3 id="ab-测试-limit-req-zone-令牌桶算法中的delay" tabindex="-1">ab 测试(limit_req_zone: 令牌桶算法中的delay): <a class="header-anchor" href="#ab-测试-limit-req-zone-令牌桶算法中的delay" aria-label="Permalink to &quot;ab 测试(limit_req_zone: 令牌桶算法中的delay):&quot;">​</a></h3><h4 id="使用lua脚本模拟业务" tabindex="-1">使用lua脚本模拟业务: <a class="header-anchor" href="#使用lua脚本模拟业务" aria-label="Permalink to &quot;使用lua脚本模拟业务:&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>function sleep(n)</span></span>
<span class="line"><span>   if n &gt; 0 then os.execute(&quot;ping -n &quot; .. tonumber(n + 1) .. &quot; localhost &gt; NUL&quot;) end</span></span>
<span class="line"><span>end</span></span>
<span class="line"><span>sleep(1)</span></span>
<span class="line"><span>ngx.say(&quot;sleep 1&quot;)</span></span></code></pre></div><h4 id="ab测试脚本-总数100-并发100-发送100-100-1次" tabindex="-1">ab测试脚本(总数100, 并发100, 发送100/100 = 1次) <a class="header-anchor" href="#ab测试脚本-总数100-并发100-发送100-100-1次" aria-label="Permalink to &quot;ab测试脚本(总数100, 并发100, 发送100/100 = 1次)&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ab -n 100 -c 100  http://127.0.0.1/search</span></span>
<span class="line"><span>pause</span></span></code></pre></div><h4 id="测试-delay-5-openresty-nginx-config" tabindex="-1">测试 delay=5 openresty nginx.config <a class="header-anchor" href="#测试-delay-5-openresty-nginx-config" aria-label="Permalink to &quot;测试 delay=5  openresty nginx.config&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http {</span></span>
<span class="line"><span>    limit_req_zone $binary_remote_addr zone=one:10m rate=10r/s;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        location /search/ {</span></span>
<span class="line"><span>            limit_req zone=one burst=20;</span></span>
<span class="line"><span>            content_by_lua_file lua/sleep.lua;</span></span>
<span class="line"><span>            access_log logs/access.log;</span></span>
<span class="line"><span>        }</span></span></code></pre></div><p><strong>access.log结果</strong></p><p>可以看到</p><p>并发100的情况下:</p><p>一共执行burst=20个, 80个被抛弃(实际情况因为瞬时burst 22 抛弃78)</p><p>第一步先不延迟执行delay=5个(实际情况因为瞬时delay=7)</p><p>第二步每100ms执行一次把剩下的burst-delay 个执行完</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:47 +0800] &quot;GET /limit HTTP/1.0&quot; 503 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:51 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:37:57 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:03 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:09 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:16 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:21 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:27 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:33 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:39 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:46 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:52 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:38:58 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:39:04 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:39:10 +0800] &quot;GET /limit HTTP/1.0&quot; 200 </span></span>
<span class="line"><span>127.0.0.1 - - [10/Aug/2022:09:39:16 +0800] &quot;GET /limit HTTP/1.0&quot; 200</span></span></code></pre></div><h4 id="测试-delay默认值-不填delay参数-delay-0-openresty-nginx-config" tabindex="-1">测试 delay默认值(不填delay参数) (delay=0) openresty nginx.config <a class="header-anchor" href="#测试-delay默认值-不填delay参数-delay-0-openresty-nginx-config" aria-label="Permalink to &quot;测试 delay默认值(不填delay参数) (delay=0) openresty nginx.config&quot;">​</a></h4><p>一共执行20个</p><p>第一步 不延迟执行delay=0个(实际情况因为瞬时delay=1)</p><p>第二步 每100ms执行一次把剩下的burst-delay 个执行完</p><p><strong>access.log结果</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>200*1</span></span>
<span class="line"><span>503*80</span></span>
<span class="line"><span>200*19</span></span></code></pre></div><h4 id="测试-nodelay-openresty-nginx-config" tabindex="-1">测试 nodelay openresty nginx.config <a class="header-anchor" href="#测试-nodelay-openresty-nginx-config" aria-label="Permalink to &quot;测试 nodelay  openresty nginx.config&quot;">​</a></h4><p>一共执行20个</p><p>不延迟执行nodelay 20个</p><p>access.log结果**</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>200*20</span></span>
<span class="line"><span>503*80</span></span></code></pre></div><h4 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h4><h4 id="-1" tabindex="-1"><a class="header-anchor" href="#-1" aria-label="Permalink to &quot;&quot;">​</a></h4></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div><div class="site-footer footer" data-v-54b3b317> Powered by <a class="vitepress" target="_blank" href="//vitepress.vuejs.org/">VitePress - 1.4.1</a></div><!--]--></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"C1ckV9Il\",\"pages_archives.md\":\"B21fPNtb\",\"pages_category.md\":\"CBur-Ef8\",\"pages_index.md\":\"DI7wwlS9\",\"pages_tags.md\":\"BZILGPlp\",\"posts_golang_expvar.md\":\"86Ki9be5\",\"posts_golang_go-http.md\":\"BbnuumkP\",\"posts_golang_go私有仓库.md\":\"CJjQoVcg\",\"posts_golang_grpcgetway.md\":\"zRSVqGex\",\"posts_golang_jaeger.md\":\"CjECfTEH\",\"posts_golang_kafka.md\":\"BRU9kqcH\",\"posts_golang_protocolbuffers_zip.md\":\"CtlEWIe7\",\"posts_golang_simple_http_golang.md\":\"DjHiM6Sf\",\"posts_golang_wg导致的提前返回.md\":\"yNOn7TOY\",\"posts_golang_用hysteria2做ip池.md\":\"wliG7mnn\",\"posts_linux_netdata.md\":\"B0Ij-SwE\",\"posts_linux_nginx_limit.md\":\"DUbu0hRT\",\"posts_linux_nginx_ssi.md\":\"TWevfjp-\",\"posts_linux_nsq.md\":\"DDnpcXj_\",\"posts_linux_redis_run_docker.md\":\"DzdcuFvi\",\"posts_linux_sshadd.md\":\"JvvPNmcB\",\"posts_linux_云原生的前世今生_k8s.md\":\"Crzkj_yt\",\"posts_linux_云原生的前世今生_云原生.md\":\"CY1kzk9m\",\"posts_linux_云原生的前世今生_云原生的前世今生.md\":\"BjB-CZeq\",\"posts_linux_云原生的前世今生_云造价实现方案.md\":\"lP7y24hX\",\"posts_linux_跨平台编译基础.md\":\"Bz-C1iwy\",\"posts_python_python_math.md\":\"C3C8Xdqr\",\"posts_windows_innosetup.md\":\"Cpl0l_2N\",\"posts_单片机_mcu_esp8266-nodemcu.md\":\"JY5dHZji\",\"posts_单片机_mcu_esp8266_cp340.md\":\"CEAsZ8vP\",\"posts_单片机_mcu_wifi_killer.md\":\"UXrVFAWS\",\"posts_单片机_mcu_wokwi-uno.md\":\"WalXErp3\",\"posts_单片机_tcp46.md\":\"DVL5OUvg\",\"posts_单片机_xiaomi_openwrt.md\":\"B8DGySzr\",\"posts_单片机_xiaomi_rathole.md\":\"nQ-kce_4\",\"posts_密码_专利.md\":\"QS4T-heL\",\"posts_杂记_github-desktop使用clash代理验证失败的问题.md\":\"CL3isPad\",\"posts_杂记_pad.md\":\"DJUx6NNV\",\"posts_杂记_testflow.md\":\"BZIAfp5g\",\"posts_杂记_tor介绍.md\":\"j3YLfyip\",\"posts_运维_ci脚本_ci脚本说明.md\":\"DFfXVJBZ\",\"posts_运维_gossip.md\":\"T_2L6Abn\",\"posts_运维_mqtt.md\":\"A5xwwrwe\",\"posts_运维_prometheus_grafana.md\":\"DQOPpQD_\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Para's\",\"description\":\"A VitePress Site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"pageSize\":10,\"posts\":[{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":273,\"tags\":[\"运维\"],\"category\":\"运维\",\"title\":\"prometheus&grafana\"},\"regularPath\":\"/posts/运维/prometheus&grafana.html\"},{\"frontMatter\":{\"title\":\"\\\"MQTT入门\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":7722,\"tags\":[\"运维\"],\"category\":\"运维\",\"description\":\"\"},\"regularPath\":\"/posts/运维/mqtt.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":6011,\"tags\":[\"运维\"],\"category\":\"运维\",\"title\":\"gossip\",\"description\":\"Gossip协议是一个通信协议，一种传播消息的方式，灵感来自于：瘟疫、社交网络等。使用Gossip协议的有：Redis Cluster、Consul、Apache Cassandra等。\"},\"regularPath\":\"/posts/运维/gossip.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1407,\"tags\":[\"运维\",\"CI脚本\"],\"category\":\"CI脚本\",\"title\":\"CI脚本说明\",\"description\":\"持续集成Continuous Integration(CI)()和持续交付Continuous Delivery(CD)\\n\\nCI :代码->svn exe (自动构建exe到测试环境)\\n\\nCD: svn exe->用户  (测试环境到自动发版)\\n\\nCI/CD流程体验:[github action](https://github.com/marketplace?type=actions)\\n\\ngithub action实现原理是[云原生](.\\\\云原生的前世今生\\\\云原生的前世今生.md)\"},\"regularPath\":\"/posts/运维/CI脚本/CI脚本说明.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":494,\"tags\":[\"杂记\"],\"category\":\"杂记\",\"title\":\"tor介绍\",\"description\":\"\"},\"regularPath\":\"/posts/杂记/tor介绍.html\"},{\"frontMatter\":{\"title\":\"\\\"记一次阿里code-flow(云效)git pull出现的问题\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1807,\"tags\":[\"杂记\"],\"category\":\"杂记\",\"description\":\"git pull 本地可以 但是通过阿里flow 不可以\"},\"regularPath\":\"/posts/杂记/testflow.html\"},{\"frontMatter\":{\"title\":\"\\\"笔记本推荐\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":5077,\"tags\":[\"杂记\"],\"category\":\"杂记\",\"description\":\"\"},\"regularPath\":\"/posts/杂记/pad.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1603,\"tags\":[\"杂记\"],\"category\":\"杂记\",\"title\":\"github-desktop使用clash代理验证失败的问题\",\"description\":\"使用git命令上传会出现:`Warning: the ECDSA host key for 'github.com' differs from the key for the IP address '198.18.0.8'`\\n\\n出现这个警告是因为 SSH 客户端发现 `github.com` 的 ECDSA 主机密钥与 `198.18.0.8` 的密钥不同。可能的原因包括：\\n\\n1. **DNS 劫持或攻击**：如果你连接的是假的 GitHub 服务器，SSH 会警告密钥不匹配。\\n2. **代理或 VPN 设置**：某些网络代理或 VPN 可能会导致连接 IP 地址的变更，进而导致密钥不一致。\\n3. **GitHub IP 地址变化**：在 GitHub 的 IP 地址改变后，本地 SSH 客户端可能会认为新的 IP 地址不是以前的主机密钥，显示此警告。\"},\"regularPath\":\"/posts/杂记/github-desktop使用clash代理验证失败的问题.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":7613,\"tags\":[\"密码\"],\"category\":\"密码\",\"title\":\"专利\",\"description\":\"**技术领域**\\n\\n人工智能和工程造价的(自动匹配单价引用)组合应用\\n\\n**背景技术**\\n\\n+ 数据的清洗整理和Onehot处理\\n+ LogisticRegression(逻辑回归)\\n\\n**发明内容**\\n\\n用户户在导入工程之后,需手动对清单定额进行单价引用以达到多条清单同步价格的目的,该技术可以部分代替用户输入,自动对多条清单的同步单价关系自动关联\\n\\n**附图**\\n\\n\\n\\n**具体实施方式**\"},\"regularPath\":\"/posts/密码/专利.html\"},{\"frontMatter\":{\"title\":\"\\\"小米4a 内网穿透\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1232,\"tags\":[\"单片机\"],\"category\":\"单片机\",\"description\":\"\"},\"regularPath\":\"/posts/单片机/xiaomi_rathole.html\"},{\"frontMatter\":{\"title\":\"\\\"小米4a刷openert\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":2988,\"tags\":[\"单片机\"],\"category\":\"单片机\",\"description\":\"网上教程乱七八糟的, 这里整理一下, 最新的[这个](https://www.luyouwang.net/9751.html)能用\\n\\n[官网在这里](https://openwrt.org/inbox/toh/xiaomi/r4ac?s[]=xiaomi&s[]=4a)\\n\\n注意4a百兆 和千兆的刷的包是不一样的\"},\"regularPath\":\"/posts/单片机/xiaomi_openwrt.html\"},{\"frontMatter\":{\"title\":\"\\\"golang tcp6 网无法访问\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":2373,\"tags\":[\"单片机\"],\"category\":\"单片机\",\"description\":\"\"},\"regularPath\":\"/posts/单片机/tcp46.html\"},{\"frontMatter\":{\"title\":\"\\\"上拉电阻和下拉电阻的模拟\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1745,\"tags\":[\"单片机\",\"MCU\"],\"category\":\"MCU\",\"description\":\"因为引用了github里面的asm, 所以github必须通, 可以翻墙/其他方法 解决\\n\\n看控制台就知道了\"},\"regularPath\":\"/posts/单片机/MCU/wokwi-UNO.html\"},{\"frontMatter\":{\"title\":\"\\\"wifi kill 是如何工作的\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1966,\"tags\":[\"单片机\",\"MCU\"],\"category\":\"MCU\",\"description\":\"[官方源码在这里](https://github.com/spacehuhntech/esp8266_deauther/)\\n\\n云盘: https://wwu.lanzouy.com/i83vl0aiducj\\n\\n提供了bin 和 Arduino 两种安装方式\\n\\n总而言之就是利用wifi协议的漏洞, wifi提供方是大爷,所以协议没有对wifi提供方做太多限制\"},\"regularPath\":\"/posts/单片机/MCU/Wifi_killer.html\"},{\"frontMatter\":{\"title\":\"\\\"ESP8266开发板的使用\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":11449,\"tags\":[\"单片机\",\"MCU\"],\"category\":\"MCU\",\"description\":\"**纯新手程序员**, 想体验一下物联网,打算做一个联网控制的开关.\\n\\n搜了一下最便宜的就是ESP8226,教程也多.\\n\\n有服务器,打算自己搭建MQTT(by RabiitMQ)来控制, 不好搞就http/tcp来控制\\n\\n用游戏引擎Godot开发跨平台程序, 不好搞就android原生开发或者网页开发\\n\\n下面是单片机相关的开发的学习过程\"},\"regularPath\":\"/posts/单片机/MCU/ESP8266_CP340.html\"},{\"frontMatter\":{\"title\":\"\\\"ESP8266-NodeMCU\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":24377,\"tags\":[\"单片机\",\"MCU\"],\"category\":\"MCU\",\"description\":\"我是小白,对智能家居很感兴趣,之前wifi/物联网太贵了,学习成本太高了.发现ESP8266太便宜了,还带wifi.想用ESP8266做一个简单的智能插座.基本就是整个学习过程\"},\"regularPath\":\"/posts/单片机/MCU/ESP8266-NodeMCU.html\"},{\"frontMatter\":{\"title\":\"\\\"python sympy 解方程\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":856,\"tags\":[\"python\"],\"category\":\"python\"},\"regularPath\":\"/posts/python/python_math.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":7620,\"tags\":[\"golang\"],\"category\":\"golang\",\"title\":\"用hysteria2做ip池\",\"description\":\"+ 起因爬虫做了ip的并发限制，大量爬取之后ip被封，所以想用hysteria2做ip池.\\n+ 为什么用hysteria2也是因为目前来看hysteria2用的比ss多\\n+ hysteria2/clash/ss 这些本身编译好的程序都是不支持 访问同一个网站的时候使用不同ip的.唯一方案是开启多个客户端,但是很麻烦.\\n+ ip池本身使用的是clash的配置文件\\n+ 这种pr官方肯定不会接受... 放一下魔改了的源码\"},\"regularPath\":\"/posts/golang/用hysteria2做ip池.html\"},{\"frontMatter\":{\"title\":\"\\\"wg导致的提前返回\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1794,\"tags\":[\"golang\"],\"category\":\"golang\",\"description\":\"#### 逻辑描述: \\n\\n给定一个int数组, 返回一个map, 该map包含该数组及对该数组数字的处理\"},\"regularPath\":\"/posts/golang/wg导致的提前返回.html\"},{\"frontMatter\":{\"title\":\"\\\"golang http demo\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":844,\"tags\":[\"golang\"],\"category\":\"golang\"},\"regularPath\":\"/posts/golang/simple_http_golang.html\"},{\"frontMatter\":{\"title\":\"\\\"Kafka入门\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":6555,\"tags\":[\"golang\"],\"category\":\"golang\",\"description\":\"\"},\"regularPath\":\"/posts/golang/kafka.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1100,\"tags\":[\"golang\"],\"category\":\"golang\",\"title\":\"jaeger\"},\"regularPath\":\"/posts/golang/jaeger.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":512,\"tags\":[\"golang\"],\"category\":\"golang\",\"title\":\"grpcgetway\"},\"regularPath\":\"/posts/golang/grpcgetway.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":203,\"tags\":[\"golang\"],\"category\":\"golang\",\"title\":\"go私有仓库\"},\"regularPath\":\"/posts/golang/go私有仓库.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1618,\"tags\":[\"golang\"],\"category\":\"golang\",\"title\":\"go-http\"},\"regularPath\":\"/posts/golang/go-http.html\"},{\"frontMatter\":{\"title\":\"\\\"expvar 简单使用\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":1283,\"tags\":[\"golang\"],\"category\":\"golang\",\"description\":\"> Package expvar provides a standardized interface to public variables, such as operation counters in servers. It exposes these variables via HTTP at **/debug/vars** in JSON format.\\n\\n> In addition to adding the HTTP handler, this package registers the following variables:\\n\\n```\\ncmdline   os.Args\\nmemstats  runtime.Memstats\\n```\\n\\n> The package is sometimes only imported for the side effect of registering its HTTP handler and the above variables. To use it this way, link this package into your program:\\n\\n导入包就是使用了, 会自动添加一个**/debug/vars**的http 服务, 具体实现看源码, 很简单, \\n\\n有一个多线程 map读写锁的实现\\n\\n```\\nimport _ \\\"expvar\\\"\\n```\"},\"regularPath\":\"/posts/golang/expvar.html\"},{\"frontMatter\":{\"title\":\"\\\"Protocol Buffers压缩(编码)原理\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":16689,\"tags\":[\"golang\"],\"category\":\"golang\",\"description\":\"\"},\"regularPath\":\"/posts/golang/ProtocolBuffers_zip.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":2314,\"tags\":[\"Windows\"],\"category\":\"Windows\",\"title\":\"innosetup\",\"description\":\"\"},\"regularPath\":\"/posts/Windows/innosetup.html\"},{\"frontMatter\":{\"title\":\"\\\"跨平台编译基础\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":20933,\"tags\":[\"Linux\"],\"category\":\"Linux\",\"description\":\"\"},\"regularPath\":\"/posts/Linux/跨平台编译基础.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":455,\"tags\":[\"Linux\",\"云原生的前世今生\"],\"category\":\"云原生的前世今生\",\"title\":\"云造价实现方案\",\"description\":\"由于用户数量的不确定性 一台服务器不一定够用, 采用云原生的方式构建, 方便上云和重新构建\"},\"regularPath\":\"/posts/Linux/云原生的前世今生/云造价实现方案.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":4147,\"tags\":[\"Linux\",\"云原生的前世今生\"],\"category\":\"云原生的前世今生\",\"title\":\"云原生的前世今生\",\"description\":\"![](img\\\\微服务.webp)\\n\\n![](img\\\\微服务2.webp)\"},\"regularPath\":\"/posts/Linux/云原生的前世今生/云原生的前世今生.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":6255,\"tags\":[\"Linux\",\"云原生的前世今生\"],\"category\":\"云原生的前世今生\",\"title\":\"云原生\",\"description\":\"xshell \\n\\n~~ftp~~~\\n\\nsftp\"},\"regularPath\":\"/posts/Linux/云原生的前世今生/云原生.html\"},{\"frontMatter\":{\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":2407,\"tags\":[\"Linux\",\"云原生的前世今生\"],\"category\":\"云原生的前世今生\",\"title\":\"k8s\",\"description\":\"\"},\"regularPath\":\"/posts/Linux/云原生的前世今生/k8s.html\"},{\"frontMatter\":{\"title\":\"\\\"git 免密登录\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":853,\"tags\":[\"Linux\"],\"category\":\"Linux\",\"description\":\"git 分为2种模式:\\n\\nssh 形如: git@codeup.aliyun.com:para/hugo.git\\n\\nhttps 形如: https://codeup.aliyun.com/para/hugo.git\"},\"regularPath\":\"/posts/Linux/sshadd.html\"},{\"frontMatter\":{\"title\":\"\\\"redis 在docker中慢的原因分析\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":5916,\"tags\":[\"Linux\"],\"category\":\"Linux\",\"description\":\"本来想实际测试一下mysql和redis到底差了多少, 按10w次, 发现mysql 用了18s,  redis 用了15s,这不合理啊, 分析下原因, 确定是docker下跑redis的原因\\n\\n[和这个问题是一样的](https://stackoverflow.com/questions/21691540/how-to-optimize-performance-for-a-docker-container)\"},\"regularPath\":\"/posts/Linux/redis_run_docker.html\"},{\"frontMatter\":{\"title\":\"\\\"nginx ssi入门\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":622,\"tags\":[\"Linux\"],\"category\":\"Linux\",\"description\":\"修改nginx.conf\\n\\n```\\n        location /ssi {\\n\\t\\t\\tssi on;\\n\\t\\t\\tssi_silent_errors on;\\n\\t\\t\\tssi_types text/shtml;\\n\\t\\t\\troot   html;\\n        }\\t\\n```\\n\\n添加 `html/ssi/ssi.html`\\n```\\n<!--#include file=\\\"header.html\\\"-->\\n<div> this is content by ssi </div>\\n<!--#include file=\\\"footer.html\\\"-->\\n```\\n添加 `html/ssi/header.html`\\n```\\n<div>this is header</div>\\n```\\n添加 `html/ssi/footer.html`\\n```\\n<div>this is footer</div>\\n```\"},\"regularPath\":\"/posts/Linux/nginx_ssi.html\"},{\"frontMatter\":{\"title\":\"\\\"Nginx 限流\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":11665,\"tags\":[\"Linux\"],\"category\":\"Linux\",\"description\":\"\"},\"regularPath\":\"/posts/Linux/nginx_limit.html\"},{\"frontMatter\":{\"title\":\"\\\"netdata\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":491,\"tags\":[\"Linux\"],\"category\":\"Linux\"},\"regularPath\":\"/posts/Linux/netdata.html\"},{\"frontMatter\":{\"title\":\"\\\"NSQ入门\\\"\",\"hidemeta\":\"true\",\"date\":\"2024-11-09\",\"modify\":\"2024-11-09\",\"size\":3326,\"tags\":[\"Linux\"],\"category\":\"Linux\",\"description\":\"1. 解耦，将一个流程加入一层数据接口拆分成两个部分，上游专注通知，下游专注处理\\n2. 缓冲，应对流量的突然上涨变更，消息队列有很好的缓冲削峰作用\\n3. 异步，上游发送消息以后可以马上返回，处理工作交给下游进行\\n4. 广播，让一个消息被多个下游进行处理\\n5. 冗余，保存处理的消息，防止消息处理失败导致的数据丢失\"},\"regularPath\":\"/posts/Linux/NSQ.html\"}],\"logo\":\"/logo.svg\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Pages\",\"link\":\"/pages/\"},{\"text\":\"Category\",\"link\":\"/pages/category\"},{\"text\":\"Archives\",\"link\":\"/pages/archives\"},{\"text\":\"Tags\",\"link\":\"/pages/tags\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}],\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>